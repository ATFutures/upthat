<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Upthat user manual • upthat</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Upthat user manual">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">upthat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/upthat.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Upthat user manual</h1>
            
      
      
      <div class="hidden name"><code>upthat.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>This report documents deliverable 2, scenario developement, for the WHO UPTHAT project, which involves: (1) setting out high level policy scenarios of active transport uptake; (2) converting these changes into estimates of rates of shift towards walking and cycling down to route network levels; and (3) simulating the impacts of these scenarios on walking and cycling levels citywide. Scenario development will also be strongly informed by the transport scenarios assessed in Accra and Kathmandu as part of UHI project activities.</p>
</div>
<div id="high-level-policy-scenarios-of-active-transport-uptake" class="section level1">
<h1 class="hasAnchor">
<a href="#high-level-policy-scenarios-of-active-transport-uptake" class="anchor"></a>High level policy scenarios of active transport uptake</h1>
<p>High level priorities are to improve population health, air quality and safety levels. This means increasing the proportion of the population that gets regular physical activity, reducing motorized vehicle use in urban centres and providing walking and cycling routes that are away from or otherwise protected from motor traffic. Urban transport policies can meet each of these objectives, creating ‘win win win’ options. Reducing car use, for example, will directly improve air quality and indirectly improve health and safety levels.</p>
<p>Specific scenarios of change include:</p>
<ul>
<li>‘Get walking’, referring to a global (meaning without spatial input components, but with spatially distributed consequences) walking uptake, as a result of citywide policies to promote safe and attractive walking.</li>
<li>‘Get cycling’, referring to a global scenario of cycling, as a result of citywide policies to provide safe cycleways.</li>
<li>‘Car diet’, a global, citywide scenario of multi-modal transport change, showing reduced levels of driving following disincentives to own and use cars.</li>
<li>‘Go public transport’, a global scenario of public transport uptake, linked to <a href="https://sustainabledevelopment.un.org/sdg11">SDG 11</a>.</li>
<li>‘Car free’, meaning investment in car free city centers and other spaces, other locally specific scenarios, such as reductions in car parking spaces.</li>
</ul>
</div>
<div id="citywide-scenarios-of-change" class="section level1">
<h1 class="hasAnchor">
<a href="#citywide-scenarios-of-change" class="anchor"></a>Citywide scenarios of change</h1>
<p>To calculate scenarios of change, the minimum data requirements are the region’s current modal split and data that can be used as explanatory variables, including data on transport infrastructure and car parking spaces, and data on the provision of public transport options.</p>
<div id="mode-split-data" class="section level2">
<h2 class="hasAnchor">
<a href="#mode-split-data" class="anchor"></a>Mode split data</h2>
<p>Mode split is one of the fundamental pieces of information that is known for most cities. For context, it’s useful to take a step back and consider the range of modal splits observed in a sample of cities worldwide. The figure below shows the diversity in mode splits based on (primarily wealthy) cities, based on data of the type shown in the table below from <a href="https://en.wikipedia.org/wiki/Modal_share">Wikipedia</a>.</p>
<table class="table">
<thead><tr class="header">
<th align="left">City</th>
<th align="right">walking</th>
<th align="right">cycling</th>
<th align="right">pt</th>
<th align="right">car</th>
<th align="right">other</th>
<th align="right">year</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Detroit</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">92</td>
<td align="right">5</td>
<td align="right">2016</td>
</tr>
<tr class="even">
<td align="left">Amsterdam</td>
<td align="right">4</td>
<td align="right">40</td>
<td align="right">29</td>
<td align="right">27</td>
<td align="right">0</td>
<td align="right">2014</td>
</tr>
<tr class="odd">
<td align="left">Bratislava</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">70</td>
<td align="right">26</td>
<td align="right">0</td>
<td align="right">2004</td>
</tr>
<tr class="even">
<td align="left">Osaka</td>
<td align="right">27</td>
<td align="right">21</td>
<td align="right">34</td>
<td align="right">18</td>
<td align="right">0</td>
<td align="right">2000</td>
</tr>
<tr class="odd">
<td align="left">Helsinki</td>
<td align="right">37</td>
<td align="right">10</td>
<td align="right">30</td>
<td align="right">22</td>
<td align="right">1</td>
<td align="right">2016</td>
</tr>
</tbody>
</table>
<p>The figure shows that cars dominate the transport systems of most cities, accounting for a mode shares ranging from 18% (Osaka, Japan) to 85% (Adalaide, Australia). A more useful way to view travel systems from an active transport perspective is to view walking as the foundation of transport systems and all other modes to supplement walking. This view is shown on the right of the figure, which shows walking mode shares in the sample of cities ranging from only 3% to more than 1/3rd (in Madrid, Spain and Vilnius, Lithuania). It is interesting to note that while there is a roughly even distribution of mode shares by car, other modes have more skewed distributions. This could reflect the diversity of policies used to promote walking, cycling and public transport and the fact that cars tend to be the default. This implication is that <strong>if no policies have been implemented to promote alternatives, cars dominate</strong>.</p>
<p><img src="https://github.com/ATFutures/who3/raw/master/figures/city-mode-split-wiki-cars.png" width="100%"><img src="https://github.com/ATFutures/who3/raw/master/figures/city-mode-split-wiki.png" width="100%"></p>
<p>The relationships between the different modes is illustrated in the figure below, which suggests competition between all modes and cars (with public transport seeming to be the biggest deterrent to driving in this dataset), and synergies between public transport and walking. <strong>This strongly suggests that a reliable way to encourage walking in cities is through investment in public transport.</strong></p>
<p><img src="https://github.com/ATFutures/who3/raw/master/figures/city-mode-cor.png" width="50%"></p>
<p>This city level data allows models of mode split to be developed, assuming there are sufficient explanatory variables defining the transport system.</p>
</div>
<div id="transport-system-data" class="section level2">
<h2 class="hasAnchor">
<a href="#transport-system-data" class="anchor"></a>Transport system data</h2>
<p>Transport systems are complex, composed of hundreds of interrelated elements. For modelling purposes, it makes sense to condense available datasets down into a few key parameters per city, zone or origin-destination pair. The process of identifying and quantifying transport system variables should be be an open-ended and adaptable process that is able to respond when the input data changes (e.g. due to changes in the transport system or improved data availability/collection).</p>
<p>This section therefore provides a framework for including key transport system variables, based on the assumption that additional/modified variables will be used in future iterations of the model. Key variables that are readily available for most cities include:</p>
<ul>
<li>Percentage of the transport network that is dedicated to motor traffic (an alternative or suplementary measure could be the percentage of the city’s surface area dedicated to motor traffic)</li>
<li>Provision for public transport, in terms of the percentage of the city’s area within walking distance (e.g. 300m) of public transport nodes such as bus stops and rail stations</li>
<li>The percentage of the city’s transport network that is dedicated to cycling. Other important variables include average gradient, type of cycle network, level or car ownership and directness of cycle routes compared with driving routes <span class="citation">[@parkin_estimation_2008]</span>.</li>
<li>Provision of walking infrastructure, for example the percentage of the city’s transport network that is footway</li>
</ul>
<p>Note that all the high level varibles outlined above are ‘scale free’, meaning that they do not depend on the city’s size. The scale free nature of such measures also means that they can be used to estimate mode shares not only at city levels but also at the level of ‘desire lines’ connecting origins and destinations, as with the use of average gradient as a predictor of cycling potential in the PCT <span class="citation">[@lovelace_propensity_2017]</span>. Some additional variables, such as distance and relative time/cost for alternative modes, only make sense when measured at the OD level.</p>
</div>
<div id="modelling-mode-shift" class="section level2">
<h2 class="hasAnchor">
<a href="#modelling-mode-shift" class="anchor"></a>Modelling mode shift</h2>
<p>Treating mode share as a dependent variable involves multiple interrelated dependent variables, which is problematic for standard regression approaches. An alternative used in cycling potential research has been to ‘expand’ mode split data into individual categorical variables <span class="citation">[@lovelace_propensity_2017, supplementary information]</span>. This strategy is computationally intensive however.</p>
</div>
</div>
<div id="methods-of-modelling-mode-shift-at-the-city-level" class="section level1">
<h1 class="hasAnchor">
<a href="#methods-of-modelling-mode-shift-at-the-city-level" class="anchor"></a>Methods of modelling mode shift at the city level</h1>
<p>The datasets presented in the previous section are examples of proportional outcomes, where we are interested in the mode split of all travel in a city. These types of data are common in ecological modelling <span class="citation">[@douma_analysing_2019]</span>, which provided a basis for investigating the question of citywide scenarios of mode shift in which modes are analogous to species. Dirichlet regression is a recently developed technique for modelling proportions based on a range of dependent variables <span class="citation">[@maier_dirichletreg_2014]</span>.</p>
<p>Building on this work, support for Dirichlet regression was added to the R package <code>brms</code> <span class="citation">[@burkner_brms_2017]</span>, which implements a Bayesian modelling framework based on the stan C++ library, in 2018. The advantage of <code>brms</code> is that it estimates uncertainty, vital for effective ‘no-regrets’ policy making. A basic example of the outputs of a Dirichlet regression model run are shown in the figure below, which represents the result of a model run for a subset of 28 cities for which we have access to population (other explanatory variables included provision of metro and bikeshare schemes).</p>
<p><img src="https://github.com/ATFutures/who3/raw/master/figures/mode-share-prediction.png" width="50%"><img src="https://github.com/ATFutures/who3/raw/master/figures/mode-share-prediction-metro.png" width="50%"></p>
<p>The result suggest that beyond a certain size, increasingly large city populations are associated with a lower proportion of trips made by driving in the sample of cities used. More explanatory variables can be added using this framework, including categorical variables such as <code>has_metro</code>, the results of which (that increase the mode share by public transport and notably walking in the results, which also show confidence intervals) are shown. Of course, the quality of the prediction relies on good input data predicting mode shift and relies on the assumption that cities are in equilibrium states. <strong>This strengthens the need for open data on mode shift at city, OD and local levels over time following a range of interventions.</strong></p>
</div>
<div id="estimates-of-rates-of-shift-towards-walking-and-cycling-down-to-route-network-levels" class="section level1">
<h1 class="hasAnchor">
<a href="#estimates-of-rates-of-shift-towards-walking-and-cycling-down-to-route-network-levels" class="anchor"></a>Estimates of rates of shift towards walking and cycling down to route network levels</h1>
</div>
<div id="simulating-the-impacts-citywide" class="section level1">
<h1 class="hasAnchor">
<a href="#simulating-the-impacts-citywide" class="anchor"></a>Simulating the impacts citywide</h1>
<p>Scenario development accounting for the transport systems in Accra and Kathmandu, as part of UHI project activities, must be based on current transport data. An overview for Ghana (a proxy for the travel pattern in Accra) is shown below.</p>
<p><img src="https://github.com/ATFutures/who3/raw/master/figures/modes-ghana-work.png" width="50%"><img src="https://github.com/ATFutures/who3/raw/master/figures/modes-ghana-work-simple.png" width="50%"></p>
</div>
<div id="running-upthat-locally" class="section level1">
<h1 class="hasAnchor">
<a href="#running-upthat-locally" class="anchor"></a>Running upthat locally</h1>
<p>Upthat is a fully open and reproducible web application. You can reproduce it on your computer on a local installation of R as follows:</p>
</div>
<div id="references" class="section level1">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#high-level-policy-scenarios-of-active-transport-uptake">High level policy scenarios of active transport uptake</a></li>
      <li>
<a href="#citywide-scenarios-of-change">Citywide scenarios of change</a><ul class="nav nav-pills nav-stacked">
<li><a href="#mode-split-data">Mode split data</a></li>
      <li><a href="#transport-system-data">Transport system data</a></li>
      <li><a href="#modelling-mode-shift">Modelling mode shift</a></li>
      </ul>
</li>
      <li><a href="#methods-of-modelling-mode-shift-at-the-city-level">Methods of modelling mode shift at the city level</a></li>
      <li><a href="#estimates-of-rates-of-shift-towards-walking-and-cycling-down-to-route-network-levels">Estimates of rates of shift towards walking and cycling down to route network levels</a></li>
      <li><a href="#simulating-the-impacts-citywide">Simulating the impacts citywide</a></li>
      <li><a href="#running-upthat-locally">Running upthat locally</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by The package maintainer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
